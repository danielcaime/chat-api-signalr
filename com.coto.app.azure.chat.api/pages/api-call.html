<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>chat-websocket </title>
  <!-- 2 load the theme CSS file -->
  <!-- obtener photo del usuario -->
</head>
<body>
  <!-- 3 setup a container element -->
  <div>
    <div class="col-md-6">
		<label>Envia un mensaje de prueba a la API de chat SignalR</label>
	</div>
      <div class="col-md-6">
          <input type="text" name="name" class="form-control" placeholder="Nombre">
      </div>
      <div class="col-md-6">
          <input type="text" name="sendto" class="form-control" placeholder="Destinatario">
      </div>
      <div class="col-md-6">
          <input type="text" name="message" class="form-control" placeholder="Mensaje">
      </div>
      <div class="col-md-6">
          <input type="button" class="form-control" value="Send" name="send">
      </div>
  </div>
  
  <!-- 4 include the jQuery library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>
  
  <script>
  
//$('input[name=message]').val()

 	$(function () {

          $('input[name=send]').click(function () {

              var message = {};
              message.Type = "text";
              message.Title = $('input[name=message]').val();
              message.Text = $('input[name=message]').val();
              message.SendTo = $('input[name=sendto]').val();
              message.SendFrom = $('input[name=name]').val();

              $.ajax({
                  url: 'http://localhost:50014/api/message/Send',
                  dataType: 'json',
                  method: 'POST',
                  data: message,
                  success: function (response) {
                      console.log("success!", response);
                  },
                  error: function (error) {
                      console.log("error!", error);
                  },
              });
          });
	});
 </script>
</body>
</html>